### 基本概念

#### 转发：
数据平面 将分组从一个输入链路接口转移到适当的输入链路接口的路由器本地都交接工作。时间短，硬件实现。
#### 路由选择
控制平面 确定分组从源到目的地所采取的端到端路径的网络范围处理过程。时间尺度长，软件实现

#### 转发表：
* 传统方式：执行路由选择协议，与相连的其他路由器进行路由信息交换
* SDN（Software-Defined Networking）方式：通过路由选择处理器与*远程控制器*通信，获取转发表信息

### 路由器
#### 结构
1. 输入端：
   1. 线路端接，终结物理链路层的物理层功能
   2. 数据链路处理（协议，拆封）
   3. 跟据路由表查找、转发、排队
2. 交换
   1. 基于内存，存储由输入线路卡来处理
   2. 基于总线，会阻塞，一条总线只有一个包转发
   3. 互联网络交换，纵横式交换机是非阻塞的，但是来自不同输入端口的两个包会对输出端口产生竞争。
3. 输出端
   1. 排队，缓存管理
   2. 数据链路处理（协议，封装）
   3. 线路端接
#### 排队
1. 输入端排队
   1. 采用FIFO模式
   2. 线路前部阻塞（HOL），会导致输入队列长度无限增大（大量丢包）
2. 输出端排队
   1. 弃尾策略，丢弃最后到达的这一个
   2. 删除已经排队的分组，主动队列管理（Active Queue Managerment），或者在缓存满之前便丢弃一个分组，这样可以向发送方提供一个阻塞信号
3. 分组调度：从队列中选出一个进行传输
   1. FIFO
   2. Priority queuing：按优先级分类，先取高优先级队列中的
   3. round robin queuing discipline：分组分类，不同类在不同队列，程序均等轮询每个队列
   4. Weighted Fair Queue：相对于3，每个类的权重不同，收到的分组数为wi/∑wj